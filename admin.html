<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾Œå°ç®¡ç†ç³»çµ± - Lee's Taiwanese Comfort Food</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Noto+Serif+TC:wght@400;500;600;700;900&display=swap" rel="stylesheet">

    <style>
        /* æ—¥å¼å®šé£Ÿåº—é¢¨æ ¼é…è‰² - æ·¡é›…æ¸…æ–° */
        :root {
            --wood-dark: #6B4423;
            --wood-medium: #8B6F47;
            --wood-light: #D4A574;
            --wood-pale: #E8DCC8;
            --cream: #FFFBF5;
            --cream-dark: #F9F5EF;
            --taiwan-red: #C1272D;
            --taiwan-green: #2F5233;
            --warm-white: #FFFFFF;
            --text-dark: #3E2723;
            --text-medium: #5D4037;
            --shadow-soft: rgba(107, 68, 35, 0.08);
            --shadow-medium: rgba(107, 68, 35, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lora', 'Noto Serif TC', serif;
            background: linear-gradient(135deg, var(--wood-pale) 0%, var(--cream-dark) 100%);
            min-height: 100vh;
            position: relative;
        }

        /* æ·¡é›…æœ¨è³ªç´‹ç†èƒŒæ™¯ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                repeating-linear-gradient(90deg, transparent, transparent 3px, rgba(107, 68, 35, 0.015) 3px, rgba(107, 68, 35, 0.015) 6px),
                repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(107, 68, 35, 0.01) 3px, rgba(107, 68, 35, 0.01) 6px);
            pointer-events: none;
            z-index: 0;
        }

        .admin-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
        }

        /* ç™»å…¥ç•Œé¢ */
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .login-title {
            text-align: center;
            color: var(--wood-dark);
            margin-bottom: 30px;
            font-size: 28px;
        }

        /* å¾Œå°ä½ˆå±€ */
        .admin-layout {
            display: flex;
            height: 100vh;
        }

        /* å´é‚Šæ¬„ */
        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, var(--wood-dark) 0%, var(--wood-medium) 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 2px 0 8px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }

        .sidebar-header h1 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 13px;
            opacity: 0.8;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin: 5px 10px;
        }

        .sidebar-menu button {
            width: 100%;
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: white;
            text-align: left;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-menu button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar-menu button.active {
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }

        .sidebar-footer {
            position: absolute;
            bottom: 20px;
            left: 10px;
            right: 10px;
        }

        .sidebar-footer button {
            width: 100%;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sidebar-footer button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* ä¸»å…§å®¹å€ */
        .main-content {
            flex: 1;
            overflow-y: auto;
            background: var(--cream);
        }

        .content-header {
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .content-header h2 {
            color: var(--wood-dark);
            font-size: 24px;
            margin-bottom: 5px;
        }

        .content-header p {
            color: var(--text-medium);
            font-size: 14px;
        }

        .content-body {
            padding: 30px;
        }

        /* çµ±è¨ˆå¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #8B6F47 0%, #6B4423 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(107, 68, 35, 0.25);
            border: 2px solid rgba(212, 165, 116, 0.3);
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
        }

        /* è¨‚å–®å¡ç‰‡ */
        .order-card {
            border: 1px solid rgba(212, 165, 116, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
            background: var(--warm-white);
            box-shadow: 0 2px 6px var(--shadow-soft);
        }

        .order-card:hover {
            border-color: var(--wood-light);
            box-shadow: 0 4px 12px var(--shadow-medium);
            transform: translateY(-2px);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .order-number {
            font-size: 20px;
            font-weight: bold;
            color: var(--wood-dark);
        }

        .order-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-accepted {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-completed {
            background: #d1fae5;
            color: #065f46;
        }

        .status-cancelled {
            background: #fee2e2;
            color: #991b1b;
        }

        .order-items {
            margin: 15px 0;
            padding: 15px;
            background: #f9fafb;
            border-radius: 8px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-family: 'Lora', 'Noto Serif TC', serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--wood-medium) 0%, var(--wood-dark) 100%);
            color: var(--warm-white);
            box-shadow: 0 2px 8px rgba(107, 68, 35, 0.2);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--wood-dark) 0%, var(--wood-medium) 100%);
            box-shadow: 0 4px 12px rgba(107, 68, 35, 0.3);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--cream);
            color: var(--wood-dark);
            border: 2px solid var(--wood-light);
        }

        .btn-secondary:hover {
            background: var(--cream-dark);
            border-color: var(--wood-medium);
            transform: translateY(-2px);
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--taiwan-red) 0%, #A01F23 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(193, 39, 45, 0.2);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #A01F23 0%, var(--taiwan-red) 100%);
            box-shadow: 0 4px 12px rgba(193, 39, 45, 0.3);
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #f59e0b;
            color: white;
        }

        .btn-warning:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        /* è¡¨æ ¼ */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 6px var(--shadow-soft);
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .table th {
            background: #f9fafb;
            font-weight: bold;
            color: var(--wood-dark);
        }

        .table tr:hover {
            background: #f9fafb;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--warm-white);
            padding: 30px;
            border-radius: 12px;
            max-width: 800px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(212, 165, 116, 0.2);
            box-shadow: 0 4px 20px var(--shadow-medium);
        }

        .modal-header {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--wood-dark);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            font-family: 'Lora', 'Noto Serif TC', serif;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        /* Toggle é–‹é—œ */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #059669;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .form-group-inline {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .availability-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
        }

        .badge-available {
            background: #d1fae5;
            color: #059669;
        }

        .badge-unavailable {
            background: #fee2e2;
            color: #dc2626;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
        }

        .empty-state-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .search-bar {
            margin-bottom: 20px;
        }

        .search-bar input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--wood-medium);
        }

        /* é¸é …å¡ç‰‡æ¨£å¼ */
        .option-card {
            background: var(--warm-white);
            border: 1px solid rgba(212, 165, 116, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
            box-shadow: 0 2px 6px var(--shadow-soft);
        }

        .option-card:hover {
            border-color: var(--wood-light);
            box-shadow: 0 4px 12px var(--shadow-medium);
            transform: translateY(-2px);
        }

        .option-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .option-name {
            font-size: 20px;
            font-weight: bold;
            color: var(--wood-dark);
        }

        .option-type-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
        }

        .badge-radio {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-checkbox {
            background: #fef3c7;
            color: #92400e;
        }

        .option-values-list {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .option-value-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .option-value-item:last-child {
            border-bottom: none;
        }

        .option-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .option-value-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .option-value-input-group input {
            flex: 1;
        }

        .option-value-input-group button {
            padding: 8px 12px;
            font-size: 14px;
        }

        .add-value-btn {
            width: 100%;
            padding: 10px;
            background: var(--cream);
            border: 2px dashed var(--wood-light);
            color: var(--wood-dark);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Lora', 'Noto Serif TC', serif;
            font-size: 14px;
        }

        .add-value-btn:hover {
            background: var(--cream-dark);
            border-color: var(--wood-medium);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .admin-layout {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: auto;
            }

            .sidebar-footer {
                position: static;
                margin-top: 20px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // å¾ localStorage è®€å–æ•¸æ“š
        const loadFromLocalStorage = (key, defaultValue) => {
            try {
                const item = localStorage.getItem(key);
                return item ? JSON.parse(item) : defaultValue;
            } catch (error) {
                console.error('Error loading from localStorage:', error);
                return defaultValue;
            }
        };

        // å„²å­˜åˆ° localStorage
        const saveToLocalStorage = (key, value) => {
            try {
                localStorage.setItem(key, JSON.stringify(value));
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        };

        // ç™»å…¥çµ„ä»¶
        function AdminLogin({ onLogin }) {
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleLogin = (e) => {
                e.preventDefault();
                if (password === 'admin123') {
                    onLogin();
                } else {
                    setError('å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡è©¦');
                }
            };

            return (
                <div className="login-container">
                    <h2 className="login-title">ğŸ” ç®¡ç†å¾Œå°ç™»å…¥</h2>
                    <form onSubmit={handleLogin}>
                        <div className="form-group">
                            <label>å¯†ç¢¼</label>
                            <input
                                type="password"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                placeholder="è«‹è¼¸å…¥ç®¡ç†å¯†ç¢¼"
                            />
                        </div>
                        {error && <p style={{ color: 'red', marginBottom: '15px' }}>{error}</p>}
                        <button type="submit" className="btn btn-primary" style={{ width: '100%' }}>
                            ç™»å…¥
                        </button>
                    </form>
                    <p style={{ marginTop: '20px', textAlign: 'center', color: '#666', fontSize: '14px' }}>
                        é è¨­å¯†ç¢¼: admin123
                    </p>
                </div>
            );
        }

        // å„€è¡¨æ¿çµ„ä»¶
        function Dashboard({ orders, menu }) {
            const today = new Date().toDateString();

            const todayOrders = orders.filter(order =>
                new Date(order.timestamp).toDateString() === today
            );

            const stats = {
                orderCount: todayOrders.length,
                revenue: todayOrders.reduce((sum, order) => sum + order.total, 0),
                itemCount: todayOrders.reduce((sum, order) =>
                    sum + order.items.reduce((itemSum, item) => itemSum + item.quantity, 0), 0
                ),
                pendingCount: todayOrders.filter(o => o.status === 'pending').length
            };

            const pendingOrders = orders.filter(o => o.status === 'pending');

            return (
                <div>
                    <div className="stats-grid">
                        <div className="stat-card">
                            <div className="stat-label">ä»Šæ—¥è¨‚å–®æ•¸</div>
                            <div className="stat-value">{stats.orderCount}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">ä»Šæ—¥ç‡Ÿæ¥­é¡</div>
                            <div className="stat-value">${stats.revenue.toFixed(2)}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">ä»Šæ—¥éŠ·å”®æ•¸é‡</div>
                            <div className="stat-value">{stats.itemCount}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">å¾…è™•ç†è¨‚å–®</div>
                            <div className="stat-value">{stats.pendingCount}</div>
                        </div>
                    </div>

                    <h3 style={{ marginTop: '30px', marginBottom: '15px', color: '#6B4423' }}>
                        ğŸ”” å¾…è™•ç†è¨‚å–® ({pendingOrders.length})
                    </h3>

                    {pendingOrders.length === 0 ? (
                        <div className="empty-state">
                            <div className="empty-state-icon">âœ…</div>
                            <p>ç›®å‰æ²’æœ‰å¾…è™•ç†çš„è¨‚å–®</p>
                        </div>
                    ) : (
                        pendingOrders.map(order => (
                            <OrderCard key={order.id} order={order} />
                        ))
                    )}
                </div>
            );
        }

        // è¨‚å–®ç®¡ç†çµ„ä»¶
        function OrderManagement({ orders, onUpdateOrder }) {
            const [filter, setFilter] = useState('all');
            const [searchTerm, setSearchTerm] = useState('');

            const filteredOrders = orders.filter(order => {
                const matchesFilter = filter === 'all' || order.status === filter;
                const matchesSearch = order.id.toString().includes(searchTerm) ||
                                    order.customerName?.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesFilter && matchesSearch;
            });

            return (
                <div>
                    <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
                        <button
                            className={`btn ${filter === 'all' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setFilter('all')}
                        >
                            å…¨éƒ¨ ({orders.length})
                        </button>
                        <button
                            className={`btn ${filter === 'pending' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setFilter('pending')}
                        >
                            å¾…è™•ç† ({orders.filter(o => o.status === 'pending').length})
                        </button>
                        <button
                            className={`btn ${filter === 'accepted' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setFilter('accepted')}
                        >
                            é€²è¡Œä¸­ ({orders.filter(o => o.status === 'accepted').length})
                        </button>
                        <button
                            className={`btn ${filter === 'completed' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setFilter('completed')}
                        >
                            å·²å®Œæˆ ({orders.filter(o => o.status === 'completed').length})
                        </button>
                    </div>

                    <div className="search-bar">
                        <input
                            type="text"
                            placeholder="æœå°‹è¨‚å–®ç·¨è™Ÿæˆ–é¡§å®¢å§“å..."
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                        />
                    </div>

                    {filteredOrders.length === 0 ? (
                        <div className="empty-state">
                            <div className="empty-state-icon">ğŸ“¦</div>
                            <p>æ²’æœ‰æ‰¾åˆ°è¨‚å–®</p>
                        </div>
                    ) : (
                        filteredOrders.map(order => (
                            <OrderCard
                                key={order.id}
                                order={order}
                                onUpdateOrder={onUpdateOrder}
                            />
                        ))
                    )}
                </div>
            );
        }

        // è¨‚å–®å¡ç‰‡çµ„ä»¶
        function OrderCard({ order, onUpdateOrder }) {
            const statusMap = {
                pending: { text: 'å¾…è™•ç†', class: 'status-pending' },
                accepted: { text: 'é€²è¡Œä¸­', class: 'status-accepted' },
                completed: { text: 'å·²å®Œæˆ', class: 'status-completed' },
                cancelled: { text: 'å·²å–æ¶ˆ', class: 'status-cancelled' }
            };

            const handleStatusChange = (newStatus) => {
                if (onUpdateOrder) {
                    onUpdateOrder(order.id, { ...order, status: newStatus });
                }
            };

            return (
                <div className="order-card">
                    <div className="order-header">
                        <div>
                            <div className="order-number">è¨‚å–® #{order.id}</div>
                            <div style={{ fontSize: '14px', color: '#666', marginTop: '5px' }}>
                                {new Date(order.timestamp).toLocaleString('zh-TW')}
                            </div>
                        </div>
                        <span className={`order-status ${statusMap[order.status].class}`}>
                            {statusMap[order.status].text}
                        </span>
                    </div>

                    {order.customerName && (
                        <div style={{ marginBottom: '10px', fontSize: '15px' }}>
                            <strong>é¡§å®¢:</strong> {order.customerName}
                            {order.phone && ` â€¢ ${order.phone}`}
                        </div>
                    )}

                    {order.serviceMode && (
                        <div style={{ marginBottom: '10px', fontSize: '15px' }}>
                            <strong>ç”¨é¤æ–¹å¼:</strong> {order.serviceMode === 'dine-in' ? 'å…§ç”¨' : 'å¤–å¸¶'}
                        </div>
                    )}

                    <div className="order-items">
                        {order.items.map((item, index) => (
                            <div key={index} className="order-item">
                                <span>{item.name} x {item.quantity}</span>
                                <span>${(item.price * item.quantity).toFixed(2)}</span>
                            </div>
                        ))}
                        <div style={{ marginTop: '10px', paddingTop: '10px', borderTop: '1px solid #e5e7eb', fontWeight: 'bold' }}>
                            <div className="order-item">
                                <span>ç¸½è¨ˆ</span>
                                <span style={{ color: '#6B4423', fontSize: '18px' }}>${order.total.toFixed(2)}</span>
                            </div>
                        </div>
                    </div>

                    {order.notes && (
                        <div style={{ marginTop: '10px', padding: '10px', background: '#fef3c7', borderRadius: '5px', fontSize: '14px' }}>
                            <strong>å‚™è¨»:</strong> {order.notes}
                        </div>
                    )}

                    {onUpdateOrder && order.status !== 'completed' && order.status !== 'cancelled' && (
                        <div className="admin-actions">
                            {order.status === 'pending' && (
                                <>
                                    <button
                                        className="btn btn-success"
                                        onClick={() => handleStatusChange('accepted')}
                                    >
                                        æ¥å—è¨‚å–®
                                    </button>
                                    <button
                                        className="btn btn-danger"
                                        onClick={() => handleStatusChange('cancelled')}
                                    >
                                        æ‹’çµ•è¨‚å–®
                                    </button>
                                </>
                            )}
                            {order.status === 'accepted' && (
                                <button
                                    className="btn btn-success"
                                    onClick={() => handleStatusChange('completed')}
                                >
                                    å®Œæˆè¨‚å–®
                                </button>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        // èœå–®ç®¡ç†çµ„ä»¶
        function MenuManagement({ menu, onUpdateMenu }) {
            const [editingItem, setEditingItem] = useState(null);
            const [showModal, setShowModal] = useState(false);
            const [filter, setFilter] = useState('all');

            const categories = {
                all: 'å…¨éƒ¨',
                highlight: 'å°åº—ç²¾é¸',
                fried: 'å„å¼ç‚¸ç‰©',
                bento: 'ä¾¿ç•¶/è“‹é£¯',
                drinks: 'é£²æ–™'
            };

            const filteredMenu = filter === 'all'
                ? menu
                : menu.filter(item => item.category === filter);

            const handleSaveItem = (item) => {
                const updatedMenu = editingItem.id
                    ? menu.map(m => m.id === item.id ? item : m)
                    : [...menu, { ...item, id: Date.now() }];

                onUpdateMenu(updatedMenu);
                setShowModal(false);
                setEditingItem(null);
            };

            const handleDeleteItem = (id) => {
                if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹èœå–®é …ç›®å—ï¼Ÿ')) {
                    onUpdateMenu(menu.filter(item => item.id !== id));
                }
            };

            const handleToggleAvailability = (id) => {
                const updatedMenu = menu.map(item =>
                    item.id === id ? { ...item, available: !item.available } : item
                );
                onUpdateMenu(updatedMenu);
            };

            return (
                <div>
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>
                        <div style={{ display: 'flex', gap: '10px' }}>
                            {Object.entries(categories).map(([key, label]) => (
                                <button
                                    key={key}
                                    className={`btn ${filter === key ? 'btn-primary' : 'btn-secondary'}`}
                                    onClick={() => setFilter(key)}
                                >
                                    {label}
                                </button>
                            ))}
                        </div>
                        <button
                            className="btn btn-success"
                            onClick={() => {
                                setEditingItem({
                                    name: '',
                                    englishName: '',
                                    price: 0,
                                    category: 'highlight',
                                    emoji: 'ğŸ±',
                                    image: '',
                                    description: '',
                                    available: true,
                                    options: []
                                });
                                setShowModal(true);
                            }}
                        >
                            â• æ–°å¢èœå–®
                        </button>
                    </div>

                    <table className="table">
                        <thead>
                            <tr>
                                <th>åç¨±</th>
                                <th>åˆ†é¡</th>
                                <th>åƒ¹æ ¼</th>
                                <th>ç‹€æ…‹</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {filteredMenu.map(item => (
                                <tr key={item.id}>
                                    <td>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                                            <span style={{ fontSize: '24px' }}>{item.emoji}</span>
                                            <div>
                                                <div style={{ fontWeight: 'bold' }}>{item.name}</div>
                                                <div style={{ fontSize: '12px', color: '#666' }}>
                                                    {item.englishName}
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>{categories[item.category]}</td>
                                    <td style={{ fontWeight: 'bold', color: '#6B4423' }}>
                                        ${item.price.toFixed(2)}
                                    </td>
                                    <td>
                                        <label className="toggle-switch">
                                            <input
                                                type="checkbox"
                                                checked={item.available !== false}
                                                onChange={() => handleToggleAvailability(item.id)}
                                            />
                                            <span className="toggle-slider"></span>
                                        </label>
                                        <span style={{ marginLeft: '10px', fontSize: '13px' }}>
                                            {item.available !== false ? 'ä¾›æ‡‰ä¸­' : 'å·²å”®ç½„'}
                                        </span>
                                    </td>
                                    <td>
                                        <div style={{ display: 'flex', gap: '5px' }}>
                                            <button
                                                className="btn btn-secondary"
                                                style={{ padding: '5px 10px', fontSize: '14px' }}
                                                onClick={() => {
                                                    setEditingItem(item);
                                                    setShowModal(true);
                                                }}
                                            >
                                                ç·¨è¼¯
                                            </button>
                                            <button
                                                className="btn btn-danger"
                                                style={{ padding: '5px 10px', fontSize: '14px' }}
                                                onClick={() => handleDeleteItem(item.id)}
                                            >
                                                åˆªé™¤
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>

                    {showModal && (
                        <MenuItemModal
                            item={editingItem}
                            onSave={handleSaveItem}
                            onClose={() => {
                                setShowModal(false);
                                setEditingItem(null);
                            }}
                        />
                    )}
                </div>
            );
        }

        // èœå–®é …ç›®ç·¨è¼¯ Modal
        function MenuItemModal({ item, onSave, onClose }) {
            const [formData, setFormData] = useState(item);

            const handleChange = (field, value) => {
                setFormData({ ...formData, [field]: value });
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(formData);
            };

            return (
                <div className="modal" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            {item.id ? 'ç·¨è¼¯èœå–®é …ç›®' : 'æ–°å¢èœå–®é …ç›®'}
                        </div>
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label>ä¸­æ–‡åç¨± *</label>
                                <input
                                    type="text"
                                    value={formData.name}
                                    onChange={(e) => handleChange('name', e.target.value)}
                                    required
                                />
                            </div>
                            <div className="form-group">
                                <label>è‹±æ–‡åç¨±</label>
                                <input
                                    type="text"
                                    value={formData.englishName}
                                    onChange={(e) => handleChange('englishName', e.target.value)}
                                />
                            </div>
                            <div className="form-group">
                                <label>åƒ¹æ ¼ *</label>
                                <input
                                    type="number"
                                    step="0.01"
                                    value={formData.price}
                                    onChange={(e) => handleChange('price', parseFloat(e.target.value))}
                                    required
                                />
                            </div>
                            <div className="form-group">
                                <label>åˆ†é¡ *</label>
                                <select
                                    value={formData.category}
                                    onChange={(e) => handleChange('category', e.target.value)}
                                    required
                                >
                                    <option value="highlight">å°åº—ç²¾é¸</option>
                                    <option value="fried">å„å¼ç‚¸ç‰©</option>
                                    <option value="bento">ä¾¿ç•¶/è“‹é£¯</option>
                                    <option value="drinks">é£²æ–™</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label>åœ–ç¤º Emoji</label>
                                <input
                                    type="text"
                                    value={formData.emoji}
                                    onChange={(e) => handleChange('emoji', e.target.value)}
                                    placeholder="ğŸ±"
                                />
                            </div>
                            <div className="form-group">
                                <label>åœ–ç‰‡ç¶²å€</label>
                                <input
                                    type="text"
                                    value={formData.image}
                                    onChange={(e) => handleChange('image', e.target.value)}
                                />
                            </div>
                            <div className="form-group">
                                <label>æè¿°</label>
                                <textarea
                                    value={formData.description}
                                    onChange={(e) => handleChange('description', e.target.value)}
                                />
                            </div>
                            <div className="form-group-inline">
                                <label className="toggle-switch">
                                    <input
                                        type="checkbox"
                                        checked={formData.available !== false}
                                        onChange={(e) => handleChange('available', e.target.checked)}
                                    />
                                    <span className="toggle-slider"></span>
                                </label>
                                <label>ä¾›æ‡‰ä¸­</label>
                            </div>
                            <div className="btn-group">
                                <button type="button" className="btn btn-secondary" onClick={onClose}>
                                    å–æ¶ˆ
                                </button>
                                <button type="submit" className="btn btn-primary">
                                    å„²å­˜
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

                        // é™„åŠ é¸é …ç®¡ç†çµ„ä»¶
        function OptionsManagement({ optionsLibrary = [], onUpdateOptionsLibrary }) {
            const [showModal, setShowModal] = React.useState(false);
            const [editingOption, setEditingOption] = React.useState(null);
            const [optionName, setOptionName] = React.useState('');
            const [optionType, setOptionType] = React.useState('radio');
            const [optionValues, setOptionValues] = React.useState([{ label: '', price: 0 }]);

            const handleAddNew = () => {
                setEditingOption(null);
                setOptionName('');
                setOptionType('radio');
                setOptionValues([{ label: '', price: 0 }]);
                setShowModal(true);
            };

            const handleEdit = (option) => {
                setEditingOption(option);
                setOptionName(option.name);
                setOptionType(option.type);
                setOptionValues([...option.options]);
                setShowModal(true);
            };

            const handleDelete = (id) => {
                if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹é¸é …å—ï¼Ÿ')) {
                    onUpdateOptionsLibrary(optionsLibrary.filter(opt => opt.id !== id));
                }
            };

            const handleSave = () => {
                if (!optionName.trim()) { alert('è«‹è¼¸å…¥é¸é …åç¨±'); return; }
                if (optionValues.length === 0 || optionValues.some(v => !v.label.trim())) { alert('è«‹è‡³å°‘æ·»åŠ ä¸€å€‹é¸é …å€¼'); return; }
                const newOption = {
                    id: editingOption ? editingOption.id : \`opt-\${Date.now()}\`,
                    name: optionName,
                    type: optionType,
                    options: optionValues.map(v => ({ label: v.label.trim(), price: Number(v.price) || 0 }))
                };
                if (editingOption) {
                    onUpdateOptionsLibrary(optionsLibrary.map(opt => opt.id === editingOption.id ? newOption : opt));
                } else {
                    onUpdateOptionsLibrary([...optionsLibrary, newOption]);
                }
                setShowModal(false);
            };

            const addValue = () => setOptionValues([...optionValues, { label: '', price: 0 }]);
            const removeValue = (i) => optionValues.length > 1 && setOptionValues(optionValues.filter((_, idx) => idx !== i));
            const updateValue = (i, f, v) => { const u = [...optionValues]; u[i][f] = v; setOptionValues(u); };

            return React.createElement('div', { style: { padding: '20px' } },
                React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', marginBottom: '20px' } },
                    React.createElement('div', null,
                        React.createElement('h2', { style: { color: '#6B4423', marginBottom: '8px' } }, 'é™„åŠ é¸é …ç®¡ç†'),
                        React.createElement('p', { style: { color: '#666', fontSize: '14px' } }, 'ç®¡ç†å¯ä¾›é¸æ“‡çš„é™„åŠ é¸é …ï¼Œå¦‚è¾£åº¦ã€é£²æ–™ã€å¤§å°ç­‰')
                    ),
                    React.createElement('button', {
                        onClick: handleAddNew,
                        style: { padding: '12px 24px', background: 'linear-gradient(135deg, #8B6F47 0%, #6B4423 100%)', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontSize: '16px', fontWeight: '600' }
                    }, 'â• æ–°å¢é¸é …')
                ),
                optionsLibrary.length === 0 ?
                    React.createElement('div', { style: { padding: '60px 20px', textAlign: 'center', border: '2px dashed #ddd', borderRadius: '12px', background: '#fff' } },
                        React.createElement('div', { style: { fontSize: '48px', marginBottom: '16px' } }, 'ğŸ“'),
                        React.createElement('p', { style: { fontSize: '16px', color: '#666' } }, 'ç›®å‰æ²’æœ‰é™„åŠ é¸é …'),
                        React.createElement('p', { style: { fontSize: '14px', color: '#999', marginTop: '8px' } }, 'é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ–°å¢')
                    ) :
                    React.createElement('div', { style: { display: 'grid', gap: '16px' } },
                        optionsLibrary.map(option =>
                            React.createElement('div', { key: option.id, style: { background: '#fff', border: '1px solid #e0e0e0', borderRadius: '12px', padding: '20px' } },
                                React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', marginBottom: '16px' } },
                                    React.createElement('div', null,
                                        React.createElement('h3', { style: { color: '#6B4423', marginBottom: '8px' } }, option.name),
                                        React.createElement('span', { style: { display: 'inline-block', padding: '4px 12px', borderRadius: '12px', fontSize: '12px', background: option.type === 'radio' ? '#e3f2fd' : '#fff3e0', color: option.type === 'radio' ? '#1976d2' : '#f57c00' } }, option.type === 'radio' ? 'å–®é¸' : 'å¤šé¸')
                                    ),
                                    React.createElement('div', { style: { display: 'flex', gap: '8px' } },
                                        React.createElement('button', { onClick: () => handleEdit(option), style: { padding: '8px 16px', background: '#f5f5f5', border: '1px solid #ddd', borderRadius: '6px', cursor: 'pointer' } }, 'ç·¨è¼¯'),
                                        React.createElement('button', { onClick: () => handleDelete(option.id), style: { padding: '8px 16px', background: '#ffebee', color: '#c62828', border: '1px solid #ffcdd2', borderRadius: '6px', cursor: 'pointer' } }, 'åˆªé™¤')
                                    )
                                ),
                                React.createElement('div', { style: { display: 'grid', gap: '8px' } },
                                    option.options.map((val, idx) =>
                                        React.createElement('div', { key: idx, style: { display: 'flex', justifyContent: 'space-between', padding: '8px 12px', background: '#f9f9f9', borderRadius: '6px' } },
                                            React.createElement('span', null, val.label),
                                            React.createElement('span', { style: { fontWeight: 'bold', color: val.price > 0 ? '#6B4423' : '#999' } }, val.price > 0 ? \`+$\${val.price.toFixed(2)}\` : 'ä¸åŠ åƒ¹')
                                        )
                                    )
                                )
                            )
                        )
                    ),
                showModal && React.createElement('div', { style: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.5)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000 }, onClick: () => setShowModal(false) },
                    React.createElement('div', { style: { background: '#fff', borderRadius: '12px', padding: '30px', width: '90%', maxWidth: '600px', maxHeight: '80vh', overflow: 'auto' }, onClick: (e) => e.stopPropagation() },
                        React.createElement('h3', { style: { marginBottom: '20px', color: '#6B4423' } }, editingOption ? 'ç·¨è¼¯é¸é …' : 'æ–°å¢é¸é …'),
                        React.createElement('div', { style: { marginBottom: '20px' } },
                            React.createElement('label', { style: { display: 'block', marginBottom: '8px', fontWeight: 'bold' } }, 'é¸é …åç¨± *'),
                            React.createElement('input', { type: 'text', value: optionName, onChange: (e) => setOptionName(e.target.value), placeholder: 'ä¾‹å¦‚ï¼šè¾£åº¦ã€é£²æ–™ã€å¤§å°', style: { width: '100%', padding: '10px', border: '1px solid #ddd', borderRadius: '6px', fontSize: '16px' } })
                        ),
                        React.createElement('div', { style: { marginBottom: '20px' } },
                            React.createElement('label', { style: { display: 'block', marginBottom: '8px', fontWeight: 'bold' } }, 'é¸é …é¡å‹'),
                            React.createElement('select', { value: optionType, onChange: (e) => setOptionType(e.target.value), style: { width: '100%', padding: '10px', border: '1px solid #ddd', borderRadius: '6px', fontSize: '16px' } },
                                React.createElement('option', { value: 'radio' }, 'å–®é¸ï¼ˆé¡§å®¢åªèƒ½é¸ä¸€å€‹ï¼‰'),
                                React.createElement('option', { value: 'checkbox' }, 'å¤šé¸ï¼ˆé¡§å®¢å¯é¸å¤šå€‹ï¼‰')
                            )
                        ),
                        React.createElement('div', { style: { marginBottom: '20px' } },
                            React.createElement('label', { style: { display: 'block', marginBottom: '8px', fontWeight: 'bold' } }, 'é¸é …å€¼'),
                            optionValues.map((val, idx) =>
                                React.createElement('div', { key: idx, style: { display: 'flex', gap: '8px', marginBottom: '8px' } },
                                    React.createElement('input', { type: 'text', value: val.label, onChange: (e) => updateValue(idx, 'label', e.target.value), placeholder: 'é¸é …åç¨±', style: { flex: 1, padding: '10px', border: '1px solid #ddd', borderRadius: '6px' } }),
                                    React.createElement('input', { type: 'number', value: val.price, onChange: (e) => updateValue(idx, 'price', e.target.value), placeholder: 'åŠ åƒ¹', style: { width: '100px', padding: '10px', border: '1px solid #ddd', borderRadius: '6px' } }),
                                    React.createElement('button', { onClick: () => removeValue(idx), disabled: optionValues.length === 1, style: { padding: '10px', background: '#ffebee', color: '#c62828', border: 'none', borderRadius: '6px', cursor: optionValues.length === 1 ? 'not-allowed' : 'pointer', opacity: optionValues.length === 1 ? 0.5 : 1 } }, 'âœ•')
                                )
                            ),
                            React.createElement('button', { onClick: addValue, style: { width: '100%', padding: '10px', background: '#f5f5f5', border: '2px dashed #ddd', borderRadius: '6px', cursor: 'pointer', marginTop: '8px' } }, 'â• æ·»åŠ é¸é …å€¼')
                        ),
                        React.createElement('div', { style: { display: 'flex', gap: '12px', justifyContent: 'flex-end' } },
                            React.createElement('button', { onClick: () => setShowModal(false), style: { padding: '10px 20px', background: '#f5f5f5', border: '1px solid #ddd', borderRadius: '6px', cursor: 'pointer' } }, 'å–æ¶ˆ'),
                            React.createElement('button', { onClick: handleSave, style: { padding: '10px 20px', background: 'linear-gradient(135deg, #8B6F47 0%, #6B4423 100%)', color: 'white', border: 'none', borderRadius: '6px', cursor: 'pointer', fontWeight: 'bold' } }, 'å„²å­˜')
                        )
                    )
                )
            );
        }

        // çµ±è¨ˆå ±è¡¨çµ„ä»¶
        function Statistics({ orders, menu }) {
            const today = new Date().toDateString();
            const todayOrders = orders.filter(order =>
                new Date(order.timestamp).toDateString() === today
            );

            // è¨ˆç®—å„å•†å“éŠ·å”®çµ±è¨ˆ
            const itemStats = {};
            orders.forEach(order => {
                order.items.forEach(item => {
                    if (!itemStats[item.name]) {
                        itemStats[item.name] = {
                            name: item.name,
                            quantity: 0,
                            revenue: 0
                        };
                    }
                    itemStats[item.name].quantity += item.quantity;
                    itemStats[item.name].revenue += item.price * item.quantity;
                });
            });

            const sortedItems = Object.values(itemStats).sort((a, b) => b.revenue - a.revenue);

            // æŒ‰æ—¥æœŸçµ±è¨ˆ
            const dateStats = {};
            orders.forEach(order => {
                const date = new Date(order.timestamp).toLocaleDateString('zh-TW');
                if (!dateStats[date]) {
                    dateStats[date] = {
                        date,
                        orderCount: 0,
                        revenue: 0
                    };
                }
                dateStats[date].orderCount++;
                dateStats[date].revenue += order.total;
            });

            const sortedDates = Object.values(dateStats).sort((a, b) =>
                new Date(b.date) - new Date(a.date)
            ).slice(0, 30); // æœ€è¿‘30å¤©

            return (
                <div>
                    <h3 style={{ marginBottom: '20px', color: '#6B4423' }}>ğŸ“ˆ ä»Šæ—¥çµ±è¨ˆ</h3>
                    <div className="stats-grid">
                        <div className="stat-card">
                            <div className="stat-label">ä»Šæ—¥è¨‚å–®</div>
                            <div className="stat-value">{todayOrders.length}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">ä»Šæ—¥ç‡Ÿæ¥­é¡</div>
                            <div className="stat-value">
                                ${todayOrders.reduce((sum, o) => sum + o.total, 0).toFixed(2)}
                            </div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">ç¸½è¨‚å–®æ•¸</div>
                            <div className="stat-value">{orders.length}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">ç¸½ç‡Ÿæ¥­é¡</div>
                            <div className="stat-value">
                                ${orders.reduce((sum, o) => sum + o.total, 0).toFixed(2)}
                            </div>
                        </div>
                    </div>

                    <h3 style={{ marginTop: '40px', marginBottom: '15px', color: '#6B4423' }}>
                        ğŸ† ç†±éŠ·å•†å“æ’è¡Œ
                    </h3>
                    <table className="table">
                        <thead>
                            <tr>
                                <th>æ’å</th>
                                <th>å•†å“åç¨±</th>
                                <th>éŠ·å”®æ•¸é‡</th>
                                <th>éŠ·å”®é‡‘é¡</th>
                            </tr>
                        </thead>
                        <tbody>
                            {sortedItems.slice(0, 10).map((item, index) => (
                                <tr key={item.name}>
                                    <td>
                                        <span style={{
                                            fontSize: '20px',
                                            fontWeight: 'bold',
                                            color: index === 0 ? '#fbbf24' : index === 1 ? '#94a3b8' : index === 2 ? '#cd7f32' : '#666'
                                        }}>
                                            {index + 1}
                                        </span>
                                    </td>
                                    <td style={{ fontWeight: 'bold' }}>{item.name}</td>
                                    <td>{item.quantity}</td>
                                    <td style={{ color: '#6B4423', fontWeight: 'bold' }}>
                                        ${item.revenue.toFixed(2)}
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>

                    <h3 style={{ marginTop: '40px', marginBottom: '15px', color: '#6B4423' }}>
                        ğŸ“… æ¯æ—¥ç‡Ÿæ¥­çµ±è¨ˆ
                    </h3>
                    <table className="table">
                        <thead>
                            <tr>
                                <th>æ—¥æœŸ</th>
                                <th>è¨‚å–®æ•¸</th>
                                <th>ç‡Ÿæ¥­é¡</th>
                            </tr>
                        </thead>
                        <tbody>
                            {sortedDates.map(stat => (
                                <tr key={stat.date}>
                                    <td>{stat.date}</td>
                                    <td>{stat.orderCount}</td>
                                    <td style={{ color: '#6B4423', fontWeight: 'bold' }}>
                                        ${stat.revenue.toFixed(2)}
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );
        }

        // ä¸»æ‡‰ç”¨ç¨‹å¼
        function AdminApp() {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [currentView, setCurrentView] = useState('dashboard');
            const [orders, setOrders] = useState([]);
            const [menu, setMenu] = useState([]);
            const [optionsLibrary, setOptionsLibrary] = useState([]);

            // è¼‰å…¥æ•¸æ“š
            useEffect(() => {
                const loadedOrders = loadFromLocalStorage('orders', []);
                const loadedMenu = loadFromLocalStorage('menu', []);
                const loadedOptionsLibrary = loadFromLocalStorage('optionsLibrary', []);
                setOrders(loadedOrders);
                setMenu(loadedMenu);
                setOptionsLibrary(loadedOptionsLibrary);
            }, []);

            // ç›£è½ localStorage è®ŠåŒ–
            useEffect(() => {
                const handleStorageChange = () => {
                    setOrders(loadFromLocalStorage('orders', []));
                    setMenu(loadFromLocalStorage('menu', []));
                    setOptionsLibrary(loadFromLocalStorage('optionsLibrary', []));
                };

                window.addEventListener('storage', handleStorageChange);

                // å®šæœŸæ›´æ–°æ•¸æ“šï¼ˆæ¯5ç§’ï¼‰
                const interval = setInterval(handleStorageChange, 5000);

                return () => {
                    window.removeEventListener('storage', handleStorageChange);
                    clearInterval(interval);
                };
            }, []);

            const handleLogin = () => {
                setIsLoggedIn(true);
            };

            const handleLogout = () => {
                setIsLoggedIn(false);
                setCurrentView('dashboard');
            };

            const handleUpdateOrder = (orderId, updatedOrder) => {
                const updatedOrders = orders.map(order =>
                    order.id === orderId ? updatedOrder : order
                );
                setOrders(updatedOrders);
                saveToLocalStorage('orders', updatedOrders);
            };

            const handleUpdateMenu = (updatedMenu) => {
                setMenu(updatedMenu);
                saveToLocalStorage('menu', updatedMenu);
            };

            const handleUpdateOptionsLibrary = (updatedLibrary) => {
                setOptionsLibrary(updatedLibrary);
                saveToLocalStorage('optionsLibrary', updatedLibrary);
            };

            if (!isLoggedIn) {
                return <AdminLogin onLogin={handleLogin} />;
            }

            const menuItems = [
                { id: 'dashboard', icon: 'ğŸ“Š', label: 'å„€è¡¨æ¿' },
                { id: 'orders', icon: 'ğŸ“¦', label: 'è¨‚å–®ç®¡ç†' },
                { id: 'menu', icon: 'ğŸ±', label: 'èœå–®ç®¡ç†' },
                { id: 'options', icon: 'âš™ï¸', label: 'é™„åŠ é¸é …ç®¡ç†' },
                { id: 'statistics', icon: 'ğŸ“ˆ', label: 'çµ±è¨ˆå ±è¡¨' }
            ];

            const viewTitles = {
                dashboard: 'å„€è¡¨æ¿',
                orders: 'è¨‚å–®ç®¡ç†',
                menu: 'èœå–®ç®¡ç†',
                options: 'é™„åŠ é¸é …ç®¡ç†',
                statistics: 'çµ±è¨ˆå ±è¡¨'
            };

            const viewDescriptions = {
                dashboard: 'å³æ™‚è¨‚å–®ç›£æ§èˆ‡ä»Šæ—¥çµ±è¨ˆ',
                orders: 'ç®¡ç†æ‰€æœ‰è¨‚å–®ç‹€æ…‹',
                menu: 'ç·¨è¼¯èœå–®é …ç›®èˆ‡ä¾›æ‡‰ç‹€æ…‹',
                options: 'ç®¡ç†å¯ä¾›é¸æ“‡çš„é™„åŠ é¸é …ï¼Œå¦‚è¾£åº¦ã€é£²æ–™ã€å¤§å°ç­‰',
                statistics: 'æŸ¥çœ‹ç‡Ÿæ”¶èˆ‡éŠ·å”®çµ±è¨ˆ'
            };

            return (
                <div className="admin-container">
                    <div className="admin-layout">
                        <aside className="sidebar">
                            <div className="sidebar-header">
                                <h1>ğŸ± å¾Œå°ç®¡ç†</h1>
                                <p>Lee's Taiwanese Comfort Food</p>
                            </div>
                            <ul className="sidebar-menu">
                                {menuItems.map(item => (
                                    <li key={item.id}>
                                        <button
                                            className={currentView === item.id ? 'active' : ''}
                                            onClick={() => setCurrentView(item.id)}
                                        >
                                            <span>{item.icon}</span>
                                            <span>{item.label}</span>
                                        </button>
                                    </li>
                                ))}
                            </ul>
                            <div className="sidebar-footer">
                                <button onClick={handleLogout}>
                                    ğŸšª ç™»å‡º
                                </button>
                            </div>
                        </aside>

                        <main className="main-content">
                            <div className="content-header">
                                <h2>{viewTitles[currentView]}</h2>
                                <p>{viewDescriptions[currentView]}</p>
                            </div>
                            <div className="content-body">
                                {currentView === 'dashboard' && (
                                    <Dashboard orders={orders} menu={menu} />
                                )}
                                {currentView === 'orders' && (
                                    <OrderManagement
                                        orders={orders}
                                        onUpdateOrder={handleUpdateOrder}
                                    />
                                )}
                                {currentView === 'menu' && (
                                    <MenuManagement
                                        menu={menu}
                                        onUpdateMenu={handleUpdateMenu}
                                    />
                                )}
                                {currentView === 'options' && (
                                    <OptionsManagement
                                        optionsLibrary={optionsLibrary}
                                        onUpdateOptionsLibrary={handleUpdateOptionsLibrary}
                                    />
                                )}
                                {currentView === 'statistics' && (
                                    <Statistics orders={orders} menu={menu} />
                                )}
                            </div>
                        </main>
                    </div>
                </div>
            );
        }

        // æ¸²æŸ“æ‡‰ç”¨ç¨‹å¼
        ReactDOM.render(<AdminApp />, document.getElementById('root'));
    </script>
</body>
</html>
<!-- Trigger Vercel deployment -->
