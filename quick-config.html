<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>å¿«é€Ÿé…ç½®å…¨å±€é¸é …</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #6B4423; }
        .btn {
            background: #6B4423;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .btn:hover { background: #8B6F47; }
        .btn-success { background: #059669; }
        .btn-danger { background: #dc2626; }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            background: #f9f9f9;
        }
        .success { background: #d1fae5; color: #065f46; }
        .error { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ å¿«é€Ÿé…ç½®å…¨å±€é¸é …</h1>
        <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•ç‚ºæ‰€æœ‰èœå–®è‡ªå‹•é…ç½®å…¨å±€é¸é …ï¼ˆè¾£åº¦ã€é£¯é‡ã€å£å‘³ã€é…èœã€é™„åŠ é£²æ–™ã€æ°´ï¼‰</p>

        <button class="btn btn-success" onclick="configureAllMenus()">ç‚ºæ‰€æœ‰èœå–®é…ç½®å…¨å±€é¸é …</button>
        <button class="btn" onclick="configureTopMenus()">åªé…ç½®å‰ 5 å€‹èœå–®</button>
        <button class="btn btn-danger" onclick="clearConfig()">æ¸…é™¤æ‰€æœ‰é…ç½®</button>

        <div id="result"></div>

        <hr style="margin: 30px 0;">
        <h2>ğŸ“‹ ç•¶å‰ç‹€æ…‹</h2>
        <div id="status"></div>
    </div>

    <script>
        function showResult(message, isSuccess) {
            const result = document.getElementById('result');
            result.className = `result ${isSuccess ? 'success' : 'error'}`;
            result.innerHTML = message;
        }

        function updateStatus() {
            const menu = JSON.parse(localStorage.getItem('menu') || '[]');
            const configured = menu.filter(m => m.appliedOptionIds?.length > 0);

            document.getElementById('status').innerHTML = `
                <p>ğŸ“Š ç¸½èœå–®æ•¸ï¼š${menu.length}</p>
                <p>âœ… å·²é…ç½®å…¨å±€é¸é …ï¼š${configured.length}</p>
                <p>â³ æœªé…ç½®ï¼š${menu.length - configured.length}</p>
                ${configured.length > 0 ? '<p><strong>å·²é…ç½®çš„èœå–®ï¼š</strong></p><ul>' + configured.map(m => `<li>${m.name}</li>`).join('') + '</ul>' : ''}
            `;
        }

        function configureAllMenus() {
            try {
                const menu = JSON.parse(localStorage.getItem('menu') || '[]');
                const updated = menu.map(item => ({
                    ...item,
                    appliedOptionIds: [1, 2, 3, 4, 5, 6] // æ‰€æœ‰å…¨å±€é¸é …
                }));

                localStorage.setItem('menu', JSON.stringify(updated));
                showResult(`âœ… æˆåŠŸï¼å·²ç‚º ${updated.length} å€‹èœå–®é…ç½®å…¨å±€é¸é …ï¼<br>è«‹é‡æ–°åŠ è¼‰å‰å°é é¢æ¸¬è©¦ã€‚`, true);
                updateStatus();
            } catch (e) {
                showResult('âŒ é…ç½®å¤±æ•—ï¼š' + e.message, false);
            }
        }

        function configureTopMenus() {
            try {
                const menu = JSON.parse(localStorage.getItem('menu') || '[]');
                const updated = menu.map((item, index) => ({
                    ...item,
                    appliedOptionIds: index < 5 ? [1, 2, 3, 4, 5, 6] : item.appliedOptionIds
                }));

                localStorage.setItem('menu', JSON.stringify(updated));
                showResult(`âœ… æˆåŠŸï¼å·²ç‚ºå‰ 5 å€‹èœå–®é…ç½®å…¨å±€é¸é …ï¼<br>è«‹é‡æ–°åŠ è¼‰å‰å°é é¢æ¸¬è©¦ã€‚`, true);
                updateStatus();
            } catch (e) {
                showResult('âŒ é…ç½®å¤±æ•—ï¼š' + e.message, false);
            }
        }

        function clearConfig() {
            if (!confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰èœå–®çš„å…¨å±€é¸é …é…ç½®å—ï¼Ÿ')) return;

            try {
                const menu = JSON.parse(localStorage.getItem('menu') || '[]');
                const updated = menu.map(item => {
                    const newItem = { ...item };
                    delete newItem.appliedOptionIds;
                    return newItem;
                });

                localStorage.setItem('menu', JSON.stringify(updated));
                showResult('âœ… å·²æ¸…é™¤æ‰€æœ‰é…ç½®ï¼', true);
                updateStatus();
            } catch (e) {
                showResult('âŒ æ¸…é™¤å¤±æ•—ï¼š' + e.message, false);
            }
        }

        // é é¢åŠ è¼‰æ™‚æ›´æ–°ç‹€æ…‹
        window.onload = updateStatus;
    </script>
</body>
</html>
