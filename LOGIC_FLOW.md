# é‚è¼¯æµç¨‹è©³è§£ (Logic Flow Documentation)

## ğŸ“Š ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº—å…§é»é¤ç³»çµ±                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    èœå–®å€     â”‚              â”‚   è³¼ç‰©è»Šå€    â”‚       â”‚
â”‚  â”‚  (Menu)      â”‚              â”‚   (Cart)     â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ å“é … | åƒ¹æ ¼  â”‚              â”‚ å“é … | æ•¸é‡  â”‚       â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚       â”‚
â”‚  â”‚ ç‰›æ’ | $380  â”‚â”€[åŠ å…¥]â”€â”€â”€â”€â”€>â”‚ ç‰›æ’ | 2    â”‚       â”‚
â”‚  â”‚ é›æ’ | $180  â”‚              â”‚ [+] [-]      â”‚       â”‚
â”‚  â”‚ æ²™æ‹‰ | $150  â”‚              â”‚              â”‚       â”‚
â”‚  â”‚     ...      â”‚              â”‚ å°è¨ˆ: $760   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚              â”‚       â”‚
â”‚                                â”‚ ç¸½é‡‘é¡: $760  â”‚       â”‚
â”‚                                â”‚              â”‚       â”‚
â”‚                                â”‚ [é€å‡ºè¨‚å–®]    â”‚       â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ ¸å¿ƒé‚è¼¯æµç¨‹

### 1. åŠ å…¥è³¼ç‰©è»Šæµç¨‹ (Add to Cart)

```
ä½¿ç”¨è€…é»æ“Šã€ŒåŠ å…¥ã€æŒ‰éˆ•
         â†“
   æª¢æŸ¥è³¼ç‰©è»Šä¸­æ˜¯å¦å·²å­˜åœ¨è©²å“é …
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
  å·²å­˜åœ¨    ä¸å­˜åœ¨
    â”‚         â”‚
    â†“         â†“
 æ•¸é‡+1    æ–°å¢å“é …
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â†“
   æ›´æ–°è³¼ç‰©è»Šç‹€æ…‹
         â†“
    é‡æ–°æ¸²æŸ“ç•«é¢
```

**JavaScript å¯¦ä½œ**ï¼š
```javascript
const addToCart = (product) => {
  // æ­¥é©Ÿ 1: æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨
  const existingItem = cart.find(item => item.id === product.id);

  if (existingItem) {
    // æ­¥é©Ÿ 2a: å·²å­˜åœ¨ â†’ æ•¸é‡ +1
    setCart(cart.map(item =>
      item.id === product.id
        ? { ...item, quantity: item.quantity + 1 }  // æ›´æ–°æ•¸é‡
        : item                                       // ä¿æŒåŸæ¨£
    ));
  } else {
    // æ­¥é©Ÿ 2b: ä¸å­˜åœ¨ â†’ æ–°å¢å“é …
    setCart([...cart, { ...product, quantity: 1 }]);
  }
};
```

**ç¯„ä¾‹åŸ·è¡Œ**ï¼š
```javascript
// åˆå§‹è³¼ç‰©è»Š
cart = []

// ç”¨æˆ¶é»æ“Šã€Œç‰›æ’ã€çš„ã€ŒåŠ å…¥ã€
addToCart({ id: 1, name: 'ç‰›æ’', price: 380 })
// çµæœï¼šcart = [{ id: 1, name: 'ç‰›æ’', price: 380, quantity: 1 }]

// ç”¨æˆ¶å†æ¬¡é»æ“Šã€Œç‰›æ’ã€çš„ã€ŒåŠ å…¥ã€
addToCart({ id: 1, name: 'ç‰›æ’', price: 380 })
// çµæœï¼šcart = [{ id: 1, name: 'ç‰›æ’', price: 380, quantity: 2 }]
```

---

### 2. å¢åŠ æ•¸é‡æµç¨‹ (Increase Quantity)

```
ä½¿ç”¨è€…é»æ“Šã€Œ+ã€æŒ‰éˆ•
         â†“
   æ‰¾åˆ°å°æ‡‰çš„è³¼ç‰©è»Šé …ç›®
         â†“
     æ•¸é‡ +1
         â†“
   æ›´æ–°è³¼ç‰©è»Šç‹€æ…‹
         â†“
    é‡æ–°æ¸²æŸ“ç•«é¢
```

**JavaScript å¯¦ä½œ**ï¼š
```javascript
const increaseQuantity = (id) => {
  setCart(cart.map(item =>
    item.id === id
      ? { ...item, quantity: item.quantity + 1 }  // ç›®æ¨™é …ç›® +1
      : item                                       // å…¶ä»–é …ç›®ä¸è®Š
  ));
};
```

---

### 3. æ¸›å°‘æ•¸é‡æµç¨‹ (Decrease Quantity)

```
ä½¿ç”¨è€…é»æ“Šã€Œ-ã€æŒ‰éˆ•
         â†“
   æ‰¾åˆ°å°æ‡‰çš„è³¼ç‰©è»Šé …ç›®
         â†“
   æª¢æŸ¥ç•¶å‰æ•¸é‡
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
 æ•¸é‡=1    æ•¸é‡>1
    â”‚         â”‚
    â†“         â†“
 ç§»é™¤é …ç›®   æ•¸é‡-1
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â†“
   æ›´æ–°è³¼ç‰©è»Šç‹€æ…‹
         â†“
    é‡æ–°æ¸²æŸ“ç•«é¢
```

**JavaScript å¯¦ä½œ**ï¼š
```javascript
const decreaseQuantity = (id) => {
  // æ­¥é©Ÿ 1: æ‰¾åˆ°é …ç›®
  const item = cart.find(item => item.id === id);

  if (item.quantity === 1) {
    // æ­¥é©Ÿ 2a: æ•¸é‡ç‚º 1 â†’ ç§»é™¤é …ç›®
    setCart(cart.filter(item => item.id !== id));
  } else {
    // æ­¥é©Ÿ 2b: æ•¸é‡ > 1 â†’ æ•¸é‡ -1
    setCart(cart.map(item =>
      item.id === id
        ? { ...item, quantity: item.quantity - 1 }
        : item
    ));
  }
};
```

**ç¯„ä¾‹åŸ·è¡Œ**ï¼š
```javascript
// åˆå§‹è³¼ç‰©è»Š
cart = [
  { id: 1, name: 'ç‰›æ’', price: 380, quantity: 2 },
  { id: 2, name: 'é›æ’', price: 180, quantity: 1 }
]

// ç”¨æˆ¶é»æ“Šã€Œç‰›æ’ã€çš„ã€Œ-ã€æŒ‰éˆ•
decreaseQuantity(1)
// çµæœï¼šcart = [
//   { id: 1, name: 'ç‰›æ’', price: 380, quantity: 1 },
//   { id: 2, name: 'é›æ’', price: 180, quantity: 1 }
// ]

// ç”¨æˆ¶é»æ“Šã€Œé›æ’ã€çš„ã€Œ-ã€æŒ‰éˆ•
decreaseQuantity(2)
// çµæœï¼šcart = [
//   { id: 1, name: 'ç‰›æ’', price: 380, quantity: 1 }
// ]  â† é›æ’è¢«ç§»é™¤
```

---

### 4. è¨ˆç®—ç¸½é‡‘é¡æµç¨‹ (Calculate Total)

```
ç³»çµ±éœ€è¦é¡¯ç¤ºç¸½é‡‘é¡
         â†“
  éæ­·è³¼ç‰©è»Šæ‰€æœ‰é …ç›®
         â†“
  æ¯å€‹é …ç›®è¨ˆç®—ï¼šå–®åƒ¹ Ã— æ•¸é‡
         â†“
    ç´¯åŠ æ‰€æœ‰å°è¨ˆ
         â†“
   è¿”å›ç¸½é‡‘é¡
```

**JavaScript å¯¦ä½œ**ï¼š
```javascript
const calculateTotal = () => {
  return cart.reduce((sum, item) => {
    return sum + (item.price * item.quantity);
  }, 0);
};
```

**Array.reduce() è©³è§£**ï¼š
```javascript
// åˆå§‹è³¼ç‰©è»Š
cart = [
  { id: 1, name: 'ç‰›æ’', price: 380, quantity: 2 },
  { id: 2, name: 'é›æ’', price: 180, quantity: 1 },
  { id: 3, name: 'å¯æ¨‚', price: 50, quantity: 3 }
]

// åŸ·è¡Œéç¨‹ï¼š
// ç¬¬ä¸€è¼ªï¼šsum = 0,   item = ç‰›æ’ â†’ sum = 0 + (380 Ã— 2) = 760
// ç¬¬äºŒè¼ªï¼šsum = 760, item = é›æ’ â†’ sum = 760 + (180 Ã— 1) = 940
// ç¬¬ä¸‰è¼ªï¼šsum = 940, item = å¯æ¨‚ â†’ sum = 940 + (50 Ã— 3) = 1090
// æœ€çµ‚çµæœï¼š1090
```

---

### 5. é€å‡ºè¨‚å–®æµç¨‹ (Submit Order)

```
ä½¿ç”¨è€…é»æ“Šã€Œé€å‡ºè¨‚å–®ã€æŒ‰éˆ•
         â†“
   è¨ˆç®—ç¸½é‡‘é¡
         â†“
  å½ˆå‡º Alert é¡¯ç¤ºç¸½é‡‘é¡
         â†“
   æ¸…ç©ºè³¼ç‰©è»Š
         â†“
    é‡æ–°æ¸²æŸ“ç•«é¢
```

**JavaScript å¯¦ä½œ**ï¼š
```javascript
const submitOrder = () => {
  // æ­¥é©Ÿ 1: è¨ˆç®—ç¸½é‡‘é¡
  const total = calculateTotal();

  // æ­¥é©Ÿ 2: é¡¯ç¤ºç¢ºèªè¨Šæ¯
  alert(`è¨‚å–®å·²é€å‡ºï¼\nç¸½é‡‘é¡ï¼š$${total}`);

  // æ­¥é©Ÿ 3: æ¸…ç©ºè³¼ç‰©è»Š
  setCart([]);
};
```

---

## ğŸ§© React Hooks ä½¿ç”¨èªªæ˜

### useState ç‹€æ…‹ç®¡ç†

```javascript
const [cart, setCart] = useState([]);
//     â†‘       â†‘                â†‘
//   ç‹€æ…‹è®Šæ•¸  æ›´æ–°å‡½æ•¸        åˆå§‹å€¼
```

**ä½¿ç”¨ç¯„ä¾‹**ï¼š
```javascript
// è®€å–ç‹€æ…‹
console.log(cart);  // []

// æ›´æ–°ç‹€æ…‹ï¼ˆè¦†è“‹ï¼‰
setCart([{ id: 1, name: 'ç‰›æ’', price: 380, quantity: 1 }]);

// æ›´æ–°ç‹€æ…‹ï¼ˆåŸºæ–¼èˆŠç‹€æ…‹ï¼‰
setCart([...cart, newItem]);  // åœ¨åŸé™£åˆ—å¾Œé¢åŠ ä¸Š newItem
```

---

## ğŸ” é—œéµ JavaScript æ–¹æ³•

### 1. Array.find()
æ‰¾å‡º**ç¬¬ä¸€å€‹**ç¬¦åˆæ¢ä»¶çš„å…ƒç´ 

```javascript
const cart = [
  { id: 1, name: 'ç‰›æ’', price: 380 },
  { id: 2, name: 'é›æ’', price: 180 }
];

const item = cart.find(item => item.id === 1);
// çµæœï¼š{ id: 1, name: 'ç‰›æ’', price: 380 }
```

### 2. Array.map()
è½‰æ›é™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ 

```javascript
const numbers = [1, 2, 3];
const doubled = numbers.map(num => num * 2);
// çµæœï¼š[2, 4, 6]

// ç”¨æ–¼è³¼ç‰©è»Šï¼šæ›´æ–°ç‰¹å®šé …ç›®
const updated = cart.map(item =>
  item.id === 1
    ? { ...item, quantity: item.quantity + 1 }  // æ›´æ–° id=1 çš„é …ç›®
    : item                                       // å…¶ä»–é …ç›®ä¸è®Š
);
```

### 3. Array.filter()
éæ¿¾å‡ºç¬¦åˆæ¢ä»¶çš„å…ƒç´ 

```javascript
const numbers = [1, 2, 3, 4, 5];
const evens = numbers.filter(num => num % 2 === 0);
// çµæœï¼š[2, 4]

// ç”¨æ–¼è³¼ç‰©è»Šï¼šç§»é™¤ç‰¹å®šé …ç›®
const filtered = cart.filter(item => item.id !== 1);
// çµæœï¼šç§»é™¤ id=1 çš„é …ç›®
```

### 4. Array.reduce()
å°‡é™£åˆ—ç¸®æ¸›ç‚ºå–®ä¸€å€¼

```javascript
const numbers = [1, 2, 3, 4];
const sum = numbers.reduce((acc, num) => acc + num, 0);
// åŸ·è¡Œéç¨‹ï¼š
// acc = 0, num = 1 â†’ acc = 0 + 1 = 1
// acc = 1, num = 2 â†’ acc = 1 + 2 = 3
// acc = 3, num = 3 â†’ acc = 3 + 3 = 6
// acc = 6, num = 4 â†’ acc = 6 + 4 = 10
// çµæœï¼š10
```

---

## ğŸ’¡ è¨­è¨ˆæ¨¡å¼èˆ‡æœ€ä½³å¯¦è¸

### 1. ä¸å¯è®Šæ€§ (Immutability)
æ°¸é ä¸è¦ç›´æ¥ä¿®æ”¹ç‹€æ…‹ï¼Œè€Œæ˜¯å‰µå»ºæ–°çš„é™£åˆ—æˆ–ç‰©ä»¶

```javascript
// âŒ éŒ¯èª¤åšæ³•ï¼ˆç›´æ¥ä¿®æ”¹ï¼‰
cart.push(newItem);
setCart(cart);

// âœ… æ­£ç¢ºåšæ³•ï¼ˆå‰µå»ºæ–°é™£åˆ—ï¼‰
setCart([...cart, newItem]);
```

### 2. æ¢ä»¶æ¸²æŸ“ (Conditional Rendering)
æ ¹æ“šç‹€æ…‹æ±ºå®šé¡¯ç¤ºå…§å®¹

```javascript
{cart.length === 0 ? (
  <p>è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>
) : (
  <table>...</table>
)}
```

### 3. äº‹ä»¶è™•ç† (Event Handling)
ä½¿ç”¨ç®­é ­å‡½æ•¸å‚³éåƒæ•¸

```javascript
// âŒ éŒ¯èª¤ï¼ˆæœƒç«‹å³åŸ·è¡Œï¼‰
<button onClick={addToCart(item)}>åŠ å…¥</button>

// âœ… æ­£ç¢ºï¼ˆé»æ“Šæ™‚æ‰åŸ·è¡Œï¼‰
<button onClick={() => addToCart(item)}>åŠ å…¥</button>
```

---

## ğŸ¯ å®Œæ•´æµç¨‹ç¯„ä¾‹

å‡è¨­ç”¨æˆ¶é€²è¡Œä»¥ä¸‹æ“ä½œï¼š

```
1. é»æ“Šã€Œç‰›æ’ã€çš„ã€ŒåŠ å…¥ã€æŒ‰éˆ•
   â†’ cart = [{ id: 1, name: 'ç‰›æ’', price: 380, quantity: 1 }]
   â†’ ç¸½é‡‘é¡ = $380

2. å†æ¬¡é»æ“Šã€Œç‰›æ’ã€çš„ã€ŒåŠ å…¥ã€æŒ‰éˆ•
   â†’ cart = [{ id: 1, name: 'ç‰›æ’', price: 380, quantity: 2 }]
   â†’ ç¸½é‡‘é¡ = $760

3. é»æ“Šã€Œé›æ’ã€çš„ã€ŒåŠ å…¥ã€æŒ‰éˆ•
   â†’ cart = [
       { id: 1, name: 'ç‰›æ’', price: 380, quantity: 2 },
       { id: 2, name: 'é›æ’', price: 180, quantity: 1 }
     ]
   â†’ ç¸½é‡‘é¡ = $940

4. é»æ“Šã€Œç‰›æ’ã€çš„ã€Œ-ã€æŒ‰éˆ•
   â†’ cart = [
       { id: 1, name: 'ç‰›æ’', price: 380, quantity: 1 },
       { id: 2, name: 'é›æ’', price: 180, quantity: 1 }
     ]
   â†’ ç¸½é‡‘é¡ = $560

5. é»æ“Šã€Œé€å‡ºè¨‚å–®ã€æŒ‰éˆ•
   â†’ Alert: "è¨‚å–®å·²é€å‡ºï¼ç¸½é‡‘é¡ï¼š$560"
   â†’ cart = []
   â†’ è³¼ç‰©è»Šæ¸…ç©º
```

---

## ğŸ“š å»¶ä¼¸å­¸ç¿’è³‡æº

- [React å®˜æ–¹æ–‡ä»¶ - useState](https://react.dev/reference/react/useState)
- [MDN - Array.reduce()](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)
- [MDN - Array.map()](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/map)
- [MDN - Array.filter()](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)
