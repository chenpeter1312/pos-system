<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»é¤ç³»çµ± - å¢å¼·ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .app {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        h2 {
            margin-bottom: 15px;
            color: #555;
        }

        /* åˆ†é¡åˆ‡æ›æŒ‰éˆ• */
        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .category-tab {
            padding: 10px 20px;
            background-color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .category-tab.active {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }

        .category-tab:hover {
            background-color: #d0d0d0;
        }

        .category-tab.active:hover {
            background-color: #45a049;
        }

        .container {
            display: flex;
            gap: 30px;
        }

        .menu-section,
        .cart-section {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f8f8f8;
            font-weight: bold;
        }

        button {
            padding: 6px 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quantity {
            display: inline-block;
            min-width: 30px;
            text-align: center;
            font-weight: bold;
        }

        .total-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .total-row.grand-total {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            border-top: 2px solid #333;
            padding-top: 10px;
            margin-top: 10px;
        }

        .submit-btn {
            width: 100%;
            margin-top: 15px;
            padding: 12px;
            background-color: #2196F3;
            font-size: 16px;
            font-weight: bold;
        }

        .submit-btn:hover {
            background-color: #0b7dda;
        }

        .empty-cart {
            text-align: center;
            color: #999;
            padding: 40px 0;
        }

        .category-badge {
            display: inline-block;
            padding: 2px 8px;
            background-color: #e3f2fd;
            color: #1976d2;
            border-radius: 3px;
            font-size: 12px;
            margin-left: 8px;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <h1>é»é¤ç³»çµ± - å¢å¼·ç‰ˆï¼ˆå«åˆ†é¡åˆ‡æ›ï¼‰</h1>

        <div class="container">
            <!-- å·¦å´ï¼šèœå–® -->
            <div class="menu-section">
                <h2>èœå–®</h2>

                <!-- åˆ†é¡åˆ‡æ› -->
                <div class="category-tabs" id="categoryTabs">
                    <!-- åˆ†é¡æŒ‰éˆ•å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>å“é …</th>
                            <th>åƒ¹æ ¼</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="menuTable">
                        <!-- èœå–®é …ç›®å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>

            <!-- å³å´ï¼šè³¼ç‰©è»Š -->
            <div class="cart-section">
                <h2>è³¼ç‰©è»Š</h2>
                <div id="cartContent">
                    <p class="empty-cart">è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å®Œæ•´èœå–®è³‡æ–™ï¼ˆå«åˆ†é¡ï¼‰
        const menuData = [
            // ä¸»é¤
            { id: 1, name: 'æ‹›ç‰Œç‰›æ’', price: 380, category: 'main' },
            { id: 2, name: 'ç‚¸é›æ’', price: 180, category: 'main' },
            { id: 3, name: 'ç¾©å¤§åˆ©éºµ', price: 220, category: 'main' },
            { id: 4, name: 'çƒ¤é®­é­š', price: 320, category: 'main' },

            // é…èœ
            { id: 5, name: 'å‡±è–©æ²™æ‹‰', price: 150, category: 'side' },
            { id: 6, name: 'è–¯æ¢', price: 80, category: 'side' },
            { id: 7, name: 'æ´‹è”¥åœˆ', price: 90, category: 'side' },

            // é£²æ–™
            { id: 8, name: 'å¯æ¨‚', price: 50, category: 'drink' },
            { id: 9, name: 'å’–å•¡', price: 90, category: 'drink' },
            { id: 10, name: 'æŸ³æ©™æ±', price: 70, category: 'drink' },

            // ç”œé»
            { id: 11, name: 'ææ‹‰ç±³è˜‡', price: 120, category: 'dessert' },
            { id: 12, name: 'å†°æ·‡æ·‹', price: 80, category: 'dessert' },
            { id: 13, name: 'å¸ƒæœ—å°¼', price: 100, category: 'dessert' }
        ];

        // åˆ†é¡å®šç¾©
        const categories = {
            all: { label: 'å…¨éƒ¨', icon: 'ğŸ½ï¸' },
            main: { label: 'ä¸»é¤', icon: 'ğŸ–' },
            side: { label: 'é…èœ', icon: 'ğŸ¥—' },
            drink: { label: 'é£²æ–™', icon: 'ğŸ¥¤' },
            dessert: { label: 'ç”œé»', icon: 'ğŸ°' }
        };

        // ç‹€æ…‹ç®¡ç†
        let cart = [];
        let currentCategory = 'all';

        // æ¸²æŸ“åˆ†é¡åˆ‡æ›æŒ‰éˆ•
        function renderCategories() {
            const tabsContainer = document.getElementById('categoryTabs');
            tabsContainer.innerHTML = Object.keys(categories).map(key => `
                <button
                    class="category-tab ${key === currentCategory ? 'active' : ''}"
                    onclick="switchCategory('${key}')">
                    ${categories[key].icon} ${categories[key].label}
                </button>
            `).join('');
        }

        // åˆ‡æ›åˆ†é¡
        function switchCategory(category) {
            currentCategory = category;
            renderCategories();
            renderMenu();
        }

        // æ¸²æŸ“èœå–®ï¼ˆæ ¹æ“šç•¶å‰åˆ†é¡ç¯©é¸ï¼‰
        function renderMenu() {
            const filteredMenu = currentCategory === 'all'
                ? menuData
                : menuData.filter(item => item.category === currentCategory);

            const menuTable = document.getElementById('menuTable');

            if (filteredMenu.length === 0) {
                menuTable.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #999;">æ­¤åˆ†é¡ç„¡å•†å“</td></tr>';
                return;
            }

            menuTable.innerHTML = filteredMenu.map(item => `
                <tr>
                    <td>
                        ${item.name}
                        <span class="category-badge">${categories[item.category].label}</span>
                    </td>
                    <td>$${item.price}</td>
                    <td>
                        <button onclick="addToCart(${item.id})">åŠ å…¥</button>
                    </td>
                </tr>
            `).join('');
        }

        // åŠ å…¥è³¼ç‰©è»Šï¼ˆé‚è¼¯åƒè€ƒ GitHub å°ˆæ¡ˆï¼‰
        function addToCart(productId) {
            const product = menuData.find(item => item.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                // å·²å­˜åœ¨ï¼Œæ•¸é‡ +1
                existingItem.quantity += 1;
            } else {
                // æ–°å¢å“é …
                cart.push({
                    ...product,
                    quantity: 1
                });
            }

            renderCart();
            console.log('ğŸ“¦ è³¼ç‰©è»Šæ›´æ–°:', cart);
        }

        // å¢åŠ æ•¸é‡
        function increaseQuantity(productId) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += 1;
                renderCart();
                console.log('â• æ•¸é‡å¢åŠ :', item);
            }
        }

        // æ¸›å°‘æ•¸é‡
        function decreaseQuantity(productId) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                if (item.quantity === 1) {
                    // æ•¸é‡ç‚º 1 æ™‚ï¼Œç§»é™¤é …ç›®
                    cart = cart.filter(item => item.id !== productId);
                    console.log('ğŸ—‘ï¸ å“é …ç§»é™¤:', productId);
                } else {
                    // æ•¸é‡ -1
                    item.quantity -= 1;
                    console.log('â– æ•¸é‡æ¸›å°‘:', item);
                }
                renderCart();
            }
        }

        // è¨ˆç®—å°è¨ˆï¼ˆSubtotalï¼‰
        function calculateSubtotal() {
            return cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        }

        // æ¸²æŸ“è³¼ç‰©è»Š
        function renderCart() {
            const cartContent = document.getElementById('cartContent');

            if (cart.length === 0) {
                cartContent.innerHTML = '<p class="empty-cart">è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>';
                return;
            }

            const subtotal = calculateSubtotal();

            cartContent.innerHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>å“é …</th>
                            <th>å–®åƒ¹</th>
                            <th>æ•¸é‡</th>
                            <th>å°è¨ˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${cart.map(item => `
                            <tr>
                                <td>${item.name}</td>
                                <td>$${item.price}</td>
                                <td>
                                    <div class="quantity-control">
                                        <button onclick="decreaseQuantity(${item.id})">-</button>
                                        <span class="quantity">${item.quantity}</span>
                                        <button onclick="increaseQuantity(${item.id})">+</button>
                                    </div>
                                </td>
                                <td>$${item.price * item.quantity}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>

                <div class="total-section">
                    <div class="total-row">
                        <span>å°è¨ˆ (Subtotal):</span>
                        <span>$${subtotal}</span>
                    </div>
                    <div class="total-row grand-total">
                        <span>ç¸½è¨ˆ (Total):</span>
                        <span>$${subtotal}</span>
                    </div>
                </div>

                <button class="submit-btn" onclick="submitOrder()">é€å‡ºè¨‚å–®</button>
            `;
        }

        // é€å‡ºè¨‚å–®ï¼ˆé¡¯ç¤º JSONï¼‰
        function submitOrder() {
            const subtotal = calculateSubtotal();

            // å»ºç«‹è¨‚å–® JSON
            const order = {
                timestamp: new Date().toISOString(),
                items: cart.map(item => ({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity,
                    subtotal: item.price * item.quantity
                })),
                subtotal: subtotal,
                total: subtotal,
                itemCount: cart.reduce((sum, item) => sum + item.quantity, 0)
            };

            // é¡¯ç¤ºè¨‚å–® JSON
            console.log('ğŸ“‹ è¨‚å–® JSON:', JSON.stringify(order, null, 2));
            alert(`âœ… è¨‚å–®å·²é€å‡ºï¼\n\nç¸½é‡‘é¡ï¼š$${subtotal}\nå“é …æ•¸é‡ï¼š${order.itemCount}\n\nè©³ç´°å…§å®¹å·²è¼¸å‡ºåˆ° Consoleï¼ˆæŒ‰ F12 æŸ¥çœ‹ï¼‰`);

            // æ¸…ç©ºè³¼ç‰©è»Š
            cart = [];
            renderCart();
        }

        // åˆå§‹åŒ–
        renderCategories();
        renderMenu();
        renderCart();

        console.log('âœ… é»é¤ç³»çµ±å·²å•Ÿå‹•');
        console.log('ğŸ“‹ èœå–®è³‡æ–™:', menuData);
    </script>
</body>
</html>
